import{o as m,k as U,w as _,a as H,e as q,t as V,u as W,d as R,A as P,O as J,i as F,c as b,l as Q,N as E,v as z,m as $,_ as L}from"./transition-Cu_djQ7a.js";import{a as I,E as B,M as k,d as T,z as M,J as x,L as X,N as Y,O as Z}from"./index-DJIvJS1r.js";function A(t,r){if(t)return t;let n=r??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function G(t,r){let n=I(A(t.value.type,t.value.as));return B(()=>{n.value=A(t.value.type,t.value.as)}),k(()=>{var u;n.value||m(r)&&m(r)instanceof HTMLButtonElement&&!((u=m(r))!=null&&u.hasAttribute("type"))&&(n.value="button")}),n}function N(t){return[t.screenX,t.screenY]}function ee(){let t=I([-1,-1]);return{wasMoved(r){let n=N(r);return t.value[0]===n[0]&&t.value[1]===n[1]?!1:(t.value=n,!0)},update(r){t.value=N(r)}}}function te({container:t,accept:r,walk:n,enabled:u}){k(()=>{let s=t.value;if(!s||u!==void 0&&!u.value)return;let l=U(t);if(!l)return;let e=Object.assign(v=>r(v),{acceptNode:r}),c=l.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,e,!1);for(;c.nextNode();)n(c.currentNode)})}function ae(t){throw new Error("Unexpected object: "+t)}var h=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(h||{});function le(t,r){let n=r.resolveItems();if(n.length<=0)return null;let u=r.resolveActiveIndex(),s=u??-1;switch(t.focus){case 0:{for(let l=0;l<n.length;++l)if(!r.resolveDisabled(n[l],l,n))return l;return u}case 1:{s===-1&&(s=n.length);for(let l=s-1;l>=0;--l)if(!r.resolveDisabled(n[l],l,n))return l;return u}case 2:{for(let l=s+1;l<n.length;++l)if(!r.resolveDisabled(n[l],l,n))return l;return u}case 3:{for(let l=n.length-1;l>=0;--l)if(!r.resolveDisabled(n[l],l,n))return l;return u}case 4:{for(let l=0;l<n.length;++l)if(r.resolveId(n[l],l,n)===t.id)return l;return u}case 5:return null;default:ae(t)}}let O=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function C(t){var r,n;let u=(r=t.innerText)!=null?r:"",s=t.cloneNode(!0);if(!(s instanceof HTMLElement))return u;let l=!1;for(let c of s.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))c.remove(),l=!0;let e=l?(n=s.innerText)!=null?n:"":u;return O.test(e)&&(e=e.replace(O,"")),e}function ne(t){let r=t.getAttribute("aria-label");if(typeof r=="string")return r.trim();let n=t.getAttribute("aria-labelledby");if(n){let u=n.split(" ").map(s=>{let l=document.getElementById(s);if(l){let e=l.getAttribute("aria-label");return typeof e=="string"?e.trim():C(l).trim()}return null}).filter(Boolean);if(u.length>0)return u.join(", ")}return C(t).trim()}function re(t){let r=I(""),n=I("");return()=>{let u=m(t);if(!u)return"";let s=u.innerText;if(r.value===s)return n.value;let l=ne(u).trim().toLowerCase();return r.value=s,n.value=l,l}}var ue=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(ue||{}),oe=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(oe||{});function se(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let j=Symbol("MenuContext");function w(t){let r=Y(j,null);if(r===null){let n=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,w),n}return r}let ve=T({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:r,attrs:n}){let u=I(1),s=I(null),l=I(null),e=I([]),c=I(""),v=I(null),S=I(1);function y(a=i=>i){let i=v.value!==null?e.value[v.value]:null,o=J(a(e.value.slice()),g=>m(g.dataRef.domRef)),d=i?o.indexOf(i):null;return d===-1&&(d=null),{items:o,activeItemIndex:d}}let f={menuState:u,buttonRef:s,itemsRef:l,items:e,searchQuery:c,activeItemIndex:v,activationTrigger:S,closeMenu:()=>{u.value=1,v.value=null},openMenu:()=>u.value=0,goToItem(a,i,o){let d=y(),g=le(a===h.Specific?{focus:h.Specific,id:i}:{focus:a},{resolveItems:()=>d.items,resolveActiveIndex:()=>d.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.disabled});c.value="",v.value=g,S.value=o??1,e.value=d.items},search(a){let i=c.value!==""?0:1;c.value+=a.toLowerCase();let o=(v.value!==null?e.value.slice(v.value+i).concat(e.value.slice(0,v.value+i)):e.value).find(g=>g.dataRef.textValue.startsWith(c.value)&&!g.dataRef.disabled),d=o?e.value.indexOf(o):-1;d===-1||d===v.value||(v.value=d,S.value=1)},clearSearch(){c.value=""},registerItem(a,i){let o=y(d=>[...d,{id:a,dataRef:i}]);e.value=o.items,v.value=o.activeItemIndex,S.value=1},unregisterItem(a){let i=y(o=>{let d=o.findIndex(g=>g.id===a);return d!==-1&&o.splice(d,1),o});e.value=i.items,v.value=i.activeItemIndex,S.value=1}};return _([s,l],(a,i)=>{var o;f.closeMenu(),H(i,q.Loose)||(a.preventDefault(),(o=m(s))==null||o.focus())},M(()=>u.value===0)),Z(j,f),V(M(()=>W(u.value,{0:R.Open,1:R.Closed}))),()=>{let a={open:u.value===0,close:f.closeMenu};return P({ourProps:{},theirProps:t,slot:a,slots:r,attrs:n,name:"Menu"})}}}),fe=T({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:r,slots:n,expose:u}){var s;let l=(s=t.id)!=null?s:`headlessui-menu-button-${F()}`,e=w("MenuButton");u({el:e.buttonRef,$el:e.buttonRef});function c(f){switch(f.key){case b.Space:case b.Enter:case b.ArrowDown:f.preventDefault(),f.stopPropagation(),e.openMenu(),x(()=>{var a;(a=m(e.itemsRef))==null||a.focus({preventScroll:!0}),e.goToItem(h.First)});break;case b.ArrowUp:f.preventDefault(),f.stopPropagation(),e.openMenu(),x(()=>{var a;(a=m(e.itemsRef))==null||a.focus({preventScroll:!0}),e.goToItem(h.Last)});break}}function v(f){switch(f.key){case b.Space:f.preventDefault();break}}function S(f){t.disabled||(e.menuState.value===0?(e.closeMenu(),x(()=>{var a;return(a=m(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(f.preventDefault(),e.openMenu(),se(()=>{var a;return(a=m(e.itemsRef))==null?void 0:a.focus({preventScroll:!0})})))}let y=G(M(()=>({as:t.as,type:r.type})),e.buttonRef);return()=>{var f;let a={open:e.menuState.value===0},{...i}=t,o={ref:e.buttonRef,id:l,type:y.value,"aria-haspopup":"menu","aria-controls":(f=m(e.itemsRef))==null?void 0:f.id,"aria-expanded":e.menuState.value===0,onKeydown:c,onKeyup:v,onClick:S};return P({ourProps:o,theirProps:i,slot:a,attrs:r,slots:n,name:"MenuButton"})}}}),de=T({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:r,slots:n,expose:u}){var s;let l=(s=t.id)!=null?s:`headlessui-menu-items-${F()}`,e=w("MenuItems"),c=I(null);u({el:e.itemsRef,$el:e.itemsRef}),te({container:M(()=>m(e.itemsRef)),enabled:M(()=>e.menuState.value===0),accept(a){return a.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});function v(a){var i;switch(c.value&&clearTimeout(c.value),a.key){case b.Space:if(e.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),e.search(a.key);case b.Enter:if(a.preventDefault(),a.stopPropagation(),e.activeItemIndex.value!==null){let o=e.items.value[e.activeItemIndex.value];(i=m(o.dataRef.domRef))==null||i.click()}e.closeMenu(),L(m(e.buttonRef));break;case b.ArrowDown:return a.preventDefault(),a.stopPropagation(),e.goToItem(h.Next);case b.ArrowUp:return a.preventDefault(),a.stopPropagation(),e.goToItem(h.Previous);case b.Home:case b.PageUp:return a.preventDefault(),a.stopPropagation(),e.goToItem(h.First);case b.End:case b.PageDown:return a.preventDefault(),a.stopPropagation(),e.goToItem(h.Last);case b.Escape:a.preventDefault(),a.stopPropagation(),e.closeMenu(),x(()=>{var o;return(o=m(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})});break;case b.Tab:a.preventDefault(),a.stopPropagation(),e.closeMenu(),x(()=>z(m(e.buttonRef),a.shiftKey?$.Previous:$.Next));break;default:a.key.length===1&&(e.search(a.key),c.value=setTimeout(()=>e.clearSearch(),350));break}}function S(a){switch(a.key){case b.Space:a.preventDefault();break}}let y=Q(),f=M(()=>y!==null?(y.value&R.Open)===R.Open:e.menuState.value===0);return()=>{var a,i;let o={open:e.menuState.value===0},{...d}=t,g={"aria-activedescendant":e.activeItemIndex.value===null||(a=e.items.value[e.activeItemIndex.value])==null?void 0:a.id,"aria-labelledby":(i=m(e.buttonRef))==null?void 0:i.id,id:l,onKeydown:v,onKeyup:S,role:"menu",tabIndex:0,ref:e.itemsRef};return P({ourProps:g,theirProps:d,slot:o,attrs:r,slots:n,features:E.RenderStrategy|E.Static,visible:f.value,name:"MenuItems"})}}}),pe=T({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:r,attrs:n,expose:u}){var s;let l=(s=t.id)!=null?s:`headlessui-menu-item-${F()}`,e=w("MenuItem"),c=I(null);u({el:c,$el:c});let v=M(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===l:!1),S=re(c),y=M(()=>({disabled:t.disabled,get textValue(){return S()},domRef:c}));B(()=>e.registerItem(l,y)),X(()=>e.unregisterItem(l)),k(()=>{e.menuState.value===0&&v.value&&e.activationTrigger.value!==0&&x(()=>{var p,D;return(D=(p=m(c))==null?void 0:p.scrollIntoView)==null?void 0:D.call(p,{block:"nearest"})})});function f(p){if(t.disabled)return p.preventDefault();e.closeMenu(),L(m(e.buttonRef))}function a(){if(t.disabled)return e.goToItem(h.Nothing);e.goToItem(h.Specific,l)}let i=ee();function o(p){i.update(p)}function d(p){i.wasMoved(p)&&(t.disabled||v.value||e.goToItem(h.Specific,l,0))}function g(p){i.wasMoved(p)&&(t.disabled||v.value&&e.goToItem(h.Nothing))}return()=>{let{disabled:p,...D}=t,K={active:v.value,disabled:p,close:e.closeMenu};return P({ourProps:{id:l,ref:c,role:"menuitem",tabIndex:p===!0?void 0:-1,"aria-disabled":p===!0?!0:void 0,onClick:f,onFocus:a,onPointerenter:o,onMouseenter:o,onPointermove:d,onMousemove:d,onPointerleave:g,onMouseleave:g},theirProps:{...n,...D},slot:K,attrs:n,slots:r,name:"MenuItem"})}}});export{de as M,fe as S,pe as b,h as c,le as f,ve as g,re as p,G as s,ee as u};
