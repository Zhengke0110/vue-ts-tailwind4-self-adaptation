import{foods as I}from"./index-D3HHg0pu.js";import{d as C,a as u,G as O,E as z,H as E,c as n,b as t,t as a,u as r,B as J,n as h,e as m,k as v,q as D,i as A,w as L,F as j,s as N,I as S,o as i,_ as q}from"./index-DJIvJS1r.js";import"./menu-G8sl1ZqM.js";import"./transition-Cu_djQ7a.js";import"./tabs-BK4JyErv.js";const G={key:0,class:"flex h-screen w-full items-center justify-center"},H={key:1,class:"flex h-screen w-full flex-col items-center justify-center p-4"},P={class:"mb-6 text-center text-gray-600"},K={class:"relative bg-gray-100"},Q=["src","alt"],U={class:"absolute bottom-0 left-0 w-full p-4 text-white md:p-6 lg:p-8"},W={class:"mb-2 inline-block rounded-full bg-orange-500 px-3 py-1 text-xs font-medium uppercase tracking-wider"},X={class:"mb-2 text-2xl font-bold drop-shadow-lg md:text-3xl lg:text-4xl"},Y={class:"flex flex-wrap items-center gap-4"},Z={class:"flex items-center"},F={class:"ml-2 text-sm"},tt={class:"flex items-center text-sm"},et={class:"p-4 md:p-6 lg:p-8"},st={class:"lg:grid lg:grid-cols-[2fr_1fr] lg:gap-8"},ot={class:"mb-8 animate-fade-in"},lt={class:"text-base leading-relaxed text-gray-600"},at={key:0,class:"mb-8 animate-fade-in-delay-1"},nt={class:"space-y-4"},it=["onClick"],rt=["src","alt"],dt={class:"flex-1"},ct={class:"mb-1 font-medium text-gray-800 transition-colors group-hover:text-orange-500"},gt={class:"line-clamp-2 text-xs text-gray-500"},ut={class:"mt-1 flex items-center text-xs"},xt={class:"text-gray-500"},ft={class:"mb-8 animate-fade-in-delay-2"},mt={class:"mb-4 flex items-center rounded-lg bg-gray-50 p-4"},vt={class:"flex flex-col items-center pr-6 border-r border-gray-200"},pt={class:"text-3xl font-bold text-orange-500"},bt={class:"ml-6"},yt={class:"text-sm text-gray-500"},ht={key:0},_t={key:0,class:"rounded-xl bg-white p-5 shadow-sm animate-fade-in-delay-1"},wt={class:"space-y-4"},kt=["onClick"],Ct=["src","alt"],Dt={class:"flex-1"},jt={class:"mb-1 font-medium text-gray-800 transition-colors group-hover:text-orange-500"},Nt={class:"line-clamp-2 text-xs text-gray-500"},St={class:"mt-1 flex items-center text-xs"},It={class:"text-gray-500"},Vt={key:0,class:"fixed bottom-0 left-0 z-10 flex w-full justify-end border-t border-gray-200 bg-white/90 px-4 py-3 backdrop-blur-md"},$t={key:3,class:"flex h-screen w-full flex-col items-center justify-center p-4"},Bt={class:"mb-6 text-center text-gray-600"},Rt=C({__name:"FoodDetailView",setup(c){const d=J(),g=O(),l=u(null),x=u([]),f=u(!1),p=u(!0),b=u(null),y=u(g.params.id),_=async s=>{try{p.value=!0,y.value=s;const e=Tt(s);if(!e){l.value=null;return}l.value=e,x.value=Mt(e,3),$(),window.scrollTo({top:0,behavior:"smooth"})}catch(e){b.value="加载美食数据失败，请稍后重试",console.error("Error loading food data:",e)}finally{p.value=!1}};z(async()=>{await new Promise(e=>setTimeout(e,500));const s=g.params.id;await _(s)}),E(()=>g.params.id,async s=>{s&&s!==y.value&&await _(s)});const V=s=>({local:"本地特色",snack:"小吃",restaurant:"餐厅"})[s]||s,$=()=>{const s=JSON.parse(localStorage.getItem("favoriteFoods")||"[]");l.value&&(f.value=s.includes(l.value.id))},B=()=>{if(!l.value)return;f.value=!f.value;const s=JSON.parse(localStorage.getItem("favoriteFood")||"[]");if(f.value)s.push(l.value.id);else{const e=s.indexOf(l.value.id);e!==-1&&s.splice(e,1)}localStorage.setItem("favoriteFood",JSON.stringify(s))},w=s=>{d.push(`/food/${s}`)},R=()=>{var s;console.log("添加评价",(s=l.value)==null?void 0:s.id)},T=()=>{var s;console.log("了解更多",(s=l.value)==null?void 0:s.id)},k=C({props:{rating:{type:Number,default:0}},setup(s){return()=>S("div",{class:"flex text-yellow-400"},Array.from({length:5},(e,o)=>S("i",{key:o,class:[o<Math.floor(s.rating||0)?"fas fa-star":o<Math.ceil(s.rating||0)&&s.rating%1!==0?"fas fa-star-half-alt":"far fa-star","text-sm"]})))}});return(s,e)=>(i(),n("div",{class:h(["min-h-screen bg-orange-50",{"lg:px-[var(--viewport-padding)] lg:py-8":r(m).isDesktop}])},[p.value?(i(),n("div",G,e[3]||(e[3]=[t("div",{class:"text-center"},[t("div",{class:"mb-4 inline-block h-10 w-10 animate-spin rounded-full border-4 border-orange-300 border-t-orange-500"}),t("p",{class:"text-gray-600"},"正在加载美食信息...")],-1)]))):b.value?(i(),n("div",H,[e[4]||(e[4]=t("i",{class:"fas fa-exclamation-circle mb-4 text-4xl text-red-500"},null,-1)),e[5]||(e[5]=t("h2",{class:"mb-2 text-xl font-bold text-gray-800"},"数据加载失败",-1)),t("p",P,a(b.value),1),t("button",{class:"rounded-lg bg-orange-500 px-4 py-2 text-white transition-colors hover:bg-orange-600",onClick:e[0]||(e[0]=o=>r(d).back())}," 返回上一页 ")])):l.value?(i(),n("div",{key:2,class:h({"mx-auto lg:max-w-6xl lg:overflow-hidden lg:rounded-2xl lg:bg-white lg:shadow-xl":r(m).isDesktop})},[t("button",{class:"fixed left-4 top-4 z-50 rounded-full bg-white/80 p-2 text-gray-700 shadow-lg backdrop-blur-md transition-transform hover:scale-105 lg:absolute",onClick:e[1]||(e[1]=o=>r(d).back())},e[6]||(e[6]=[t("i",{class:"fas fa-arrow-left"},null,-1)])),t("div",K,[t("img",{src:l.value.image,alt:l.value.title,class:"h-64 w-full object-cover md:h-80 lg:h-96"},null,8,Q),e[8]||(e[8]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/20"},null,-1)),t("div",U,[t("span",W,a(V(l.value.category)),1),t("h1",X,a(l.value.title),1),t("div",Y,[t("div",Z,[D(r(k),{rating:l.value.rating},null,8,["rating"]),t("span",F,a(l.value.rating)+"/5",1)]),t("span",tt,[e[7]||(e[7]=t("i",{class:"fas fa-comment mr-2"},null,-1)),A(" "+a(l.value.reviews)+"条点评 ",1)])])]),t("button",{class:"absolute right-4 top-4 rounded-full bg-white/80 p-3 text-gray-700 shadow-lg backdrop-blur-md transition-transform hover:scale-105 md:right-6 md:top-6 lg:right-8 lg:top-8",onClick:L(B,["prevent"])},[t("i",{class:h(["fas fa-heart",{"text-red-500":f.value}])},null,2)])]),t("div",et,[t("div",st,[t("div",null,[t("section",ot,[e[9]||(e[9]=t("h2",{class:"mb-4 text-xl font-bold text-gray-800"},"美食描述",-1)),t("p",lt,a(l.value.description),1)]),!r(m).isDesktop&&x.value.length>0?(i(),n("section",at,[e[12]||(e[12]=t("h2",{class:"mb-4 text-xl font-bold text-gray-800"},"相关推荐",-1)),t("div",nt,[(i(!0),n(j,null,N(x.value,o=>(i(),n("div",{key:o.id,class:"group flex cursor-pointer gap-3 rounded-lg p-2 transition-all hover:bg-orange-50",onClick:M=>w(o.id)},[t("img",{src:o.image,alt:o.title,class:"h-16 w-20 rounded-lg object-cover transition-transform duration-300 group-hover:scale-105"},null,8,rt),t("div",dt,[t("h4",ct,a(o.title),1),t("p",gt,a(o.description),1),t("div",ut,[e[10]||(e[10]=t("i",{class:"fas fa-star mr-1 text-yellow-400"},null,-1)),t("span",null,a(o.rating),1),e[11]||(e[11]=t("span",{class:"mx-1 text-gray-400"},"•",-1)),t("span",xt,a(o.reviews)+" 条点评",1)])])],8,it))),128))])])):v("",!0),t("section",ft,[t("div",{class:"mb-4 flex items-center justify-between"},[e[13]||(e[13]=t("h2",{class:"text-xl font-bold text-gray-800"},"顾客评价",-1)),t("button",{class:"rounded-lg bg-orange-100 px-4 py-2 text-sm font-medium text-orange-600 transition-colors hover:bg-orange-200",onClick:R}," 写评价 ")]),t("div",mt,[t("div",vt,[t("div",pt,a(l.value.rating),1),D(r(k),{rating:l.value.rating},null,8,["rating"])]),t("div",bt,[t("div",yt,"基于 "+a(l.value.reviews)+" 条评价",1)])]),e[14]||(e[14]=t("div",{class:"flex flex-col items-center justify-center rounded-xl bg-gray-50 py-10 text-center"},[t("i",{class:"fas fa-comment-slash mb-3 text-3xl text-gray-300"}),t("p",{class:"text-gray-500"},"暂无详细评价，快来添加第一条吧！")],-1))])]),r(m).isDesktop?(i(),n("div",ht,[x.value.length>0?(i(),n("div",_t,[e[17]||(e[17]=t("h3",{class:"mb-4 text-lg font-medium text-gray-800"},"相关推荐",-1)),t("div",wt,[(i(!0),n(j,null,N(x.value,o=>(i(),n("div",{key:o.id,class:"group flex cursor-pointer gap-3 rounded-lg p-2 transition-all hover:bg-orange-50",onClick:M=>w(o.id)},[t("img",{src:o.image,alt:o.title,class:"h-16 w-20 rounded-lg object-cover transition-transform duration-300 group-hover:scale-105"},null,8,Ct),t("div",Dt,[t("h4",jt,a(o.title),1),t("p",Nt,a(o.description),1),t("div",St,[e[15]||(e[15]=t("i",{class:"fas fa-star mr-1 text-yellow-400"},null,-1)),t("span",null,a(o.rating),1),e[16]||(e[16]=t("span",{class:"mx-1 text-gray-400"},"•",-1)),t("span",It,a(o.reviews)+" 条点评",1)])])],8,kt))),128))])])):v("",!0)])):v("",!0)])]),r(m).isDesktop?v("",!0):(i(),n("div",Vt,[t("button",{class:"rounded-lg bg-orange-500 px-6 py-2 font-medium text-white transition-all hover:bg-orange-600 active:scale-95",onClick:T}," 了解更多 ")]))],2)):(i(),n("div",$t,[e[18]||(e[18]=t("i",{class:"fas fa-search mb-4 text-4xl text-gray-400"},null,-1)),e[19]||(e[19]=t("h2",{class:"mb-2 text-xl font-bold text-gray-800"},"未找到相关美食",-1)),t("p",Bt,'抱歉，无法找到ID为"'+a(y.value)+'"的美食信息',1),t("button",{class:"rounded-lg bg-orange-500 px-4 py-2 text-white transition-colors hover:bg-orange-600",onClick:e[2]||(e[2]=o=>r(d).push("/foods"))}," 浏览全部美食 ")]))],2))}}),Lt=q(Rt,[["__scopeId","data-v-0ec31ab3"]]),Tt=c=>I.find(d=>d.id===c),Mt=(c,d=3)=>c?I.filter(g=>g.category===c.category&&g.id!==c.id).slice(0,d):[];export{Lt as default,Tt as getFoodById,Mt as getRelatedFoods};
